-- staff_db
CREATE TABLE staff (
  id UUID PRIMARY KEY,
  user_id UUID UNIQUE,
  employee_id VARCHAR(50) UNIQUE,
  department VARCHAR(100),
  position VARCHAR(100),
  hire_date DATE,
  salary DECIMAL(10,2),
  employment_type VARCHAR(20), -- full_time, part_time, contractor
  hourly_rate DECIMAL(10,2),
  max_hours_per_week INTEGER,
  skills VARCHAR[],
  certifications VARCHAR[],
  emergency_contact JSONB,
  bank_details JSONB,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE availability (
  id UUID PRIMARY KEY,
  staff_id UUID,
  day_of_week INTEGER, -- 0-6 (Sunday-Saturday)
  start_time TIME,
  end_time TIME,
  timezone VARCHAR(50),
  is_recurring BOOLEAN DEFAULT true,
  valid_from DATE,
  valid_to DATE,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE shifts (
  id UUID PRIMARY KEY,
  staff_id UUID,
  start_time TIMESTAMP,
  end_time TIMESTAMP,
  break_duration INTEGER, -- minutes
  location VARCHAR(200),
  notes TEXT,
  status VARCHAR(20), -- scheduled, in_progress, completed, cancelled
  clock_in_time TIMESTAMP,
  clock_out_time TIMESTAMP,
  actual_duration INTEGER, -- minutes
  overtime_duration INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE payroll (
  id UUID PRIMARY KEY,
  staff_id UUID,
  period_start DATE,
  period_end DATE,
  base_salary DECIMAL(10,2),
  overtime_pay DECIMAL(10,2),
  bonus DECIMAL(10,2),
  deductions DECIMAL(10,2),
  tax_amount DECIMAL(10,2),
  net_pay DECIMAL(10,2),
  payment_method VARCHAR(50),
  payment_date DATE,
  status VARCHAR(20), -- pending, processing, paid
  created_at TIMESTAMP DEFAULT NOW()
);